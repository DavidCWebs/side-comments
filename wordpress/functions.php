<?php/** * The MIT License (MIT) * Copyright (c) 2014 David Condrey *  * Permission is hereby granted, free of charge, to any person obtaining a copy * of this software and associated documentation files (the "Software"), to deal * in the Software without restriction, including without limitation the rights * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell * copies of the Software, and to permit persons to whom the Software is * furnished to do so, subject to the following conditions: *  * The above copyright notice and this permission notice shall be included in * all copies or substantial portions of the Software. *  * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, * FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN * THE SOFTWARE. *//** * Enqueue CSS and JS */if ( ! function_exists( 'side_comments_init_scripts' ) ) {	function side_comments_init_scripts() {		wp_register_style( 'side-comments-style', ( get_template_directory_uri() . '/side-comments.css' ) );		wp_register_script( 'side-comments-script', ( get_template_directory_uri() . '/side-comments.js' ), array ( 'jquery' ) );		wp_enqueue_style( 'side-comments-style');		wp_enqueue_script( 'side-comments-script');	}	add_action( 'wp_enqueue_scripts', 'side_comments_init_scripts' );}/** * Add classes to post container * @param $classes * * @return array */if ( ! function_exists( 'side_comments_post_class' ) ) {	function side_comments_post_class($classes) {		$classes = array(			'commentable-container',			'container'		);		return $classes;	}	add_filter('post_class', 'side_comments_post_class');}/** * Filter paragraphs in the_content add class * and incremental id to each paragraph * * @param $content * @return mixed */if ( ! function_exists( 'side_comments_post_class' ) ) {	function side_comments_incrementparagraphs( $content ) {		return preg_replace_callback(			'|<p>|', function ( $matches ) {				static $i = 1;				return sprintf( '<p class="commentable-section" data-section-id="%d">', $i++ );			}, $content		);	}	add_filter( 'the_content', 'incrementparagraphs', 10, 1 );}